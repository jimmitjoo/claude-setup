#!/usr/bin/expect -f
#
# Hybrid-wrapper: Auto-confirm på bekräftelser, men pausa vid riktiga frågor
#
# Användning: claude-semi-auto [claude argument]
#

set timeout -1

# Starta claude
spawn claude {*}$argv

# Interact mode - användaren kan skriva, men vi fångar vissa mönster
interact {
    # Plan mode - auto-godkänn
    -re {(?i)enter plan mode\?} {
        send "y\r"
    }

    # Continue prompts - auto-godkänn
    -re {(?i)continue\?|keep going\?} {
        send "y\r"
    }

    # Tool permissions med [y/n] - auto-godkänn
    -re {Allow.*\[y/n\]} {
        send "y\r"
    }

    # Allt annat går igenom till användaren
}
